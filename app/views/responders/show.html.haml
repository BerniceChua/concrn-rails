.row
  .col-md-5
    %h1.name= "#{@responder.name} (Responder)"
  .col-md-5.col-md-offset-2
    - if @responder.active
      %br
      %label Available &nbsp
      - path = @responder.on_shift? ? end_shift_responder_path(@responder) : start_shift_responder_path(@responder)
      = simple_form_for '', url: path, method: :post do |f|
        = f.check_box :available, checked: @responder.on_shift?, class: 'availability'
    %br
    .phone= @responder.phone
    .email= link_to @responder.email, "mailto:#{@responder.email}"
%br
%h3 Shift Table
%table.table.table-condensed
  %thead
    %th Date
    %th
      Time
      = "(24 hour, #{Time.now.localtime.zone})"
  %tbody
    - @responder.shifts.each do |shift|
      %tr
        %td
          = shift.start_time.localtime.strftime('%-m-%-d-%y')
          - if shift.end_time && shift.start_time.to_date != shift.end_time.to_date
            to
            = shift.end_time.localtime.strftime('%-m-%-d-%y')
        %td= "#{shift.start_time.localtime.strftime('%H:%M')} to #{shift.end_time ? shift.end_time.localtime.strftime('%H:%M') : 'now'}"

%br
- if @responder.dispatches.present?
  %table.table.table-condensed
    %thead
      %tr
        %th Date
        %th Address
        %th Status
        %th
    %tbody
      - @responder.dispatches.each do |dispatch|
        - report = dispatch.report
        = content_tag_for :tr, report, class: report.table_status do
          %td= report.created_at.strftime('%-m-%-d-%y')
          %td= report.address
          %td= report.status
          %td= link_to 'Details', report_path(report)
- else
  %weak Responder has not been dispatched to a report yet.
.row
  %br
  - status = @responder.active ? 'Deactivate' : 'Reactivate'
  .col-sm-2= link_to "#{status} Responder", responder_path(@responder, responder: {active: !@responder.active}), method: :put,
    class: 'btn btn-warning'
