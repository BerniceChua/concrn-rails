= content_tag_for :tr, report, class: "freshness-#{report.freshness} pusher", data: {'id' => report.id, 'type' => 'report'} do
  %td{title: report.created_at.to_s}
    %strong
      .digits= "#{report.created_at.strftime("%I:%M %p")}"
      .words= "(#{time_ago_in_words(report.created_at)} ago)"
      .show_link= link_to("Show Details", report)

  %td= link_to report.name, reporter_path(report, name: report.name)

  %td= link_to report.phone, reporter_path(report, phone: report.phone)

  %td
    - if report.gender.present?
      %dt Gender
      %dd= report.gender
    - if report.age.present?
      %dt Age
      %dd= report.age
    - if report.race.present?
      %dt Race
      %dd= report.race

  %td
    - if report.nature.present?
      %dd=report.nature
    - if report.setting.present?
      %dt Setting
      %dd= report.setting
    - if report.observations.present?
      %dt Observations
      %dd= report.observations * ', '

  %td= link_to report.address, report.google_maps_address, target: '_blank'

  %td{class: "report-#{report.id}-dispatch"}
    = render partial: "dispatches/create", locals: { report: report } unless report.archived_or_completed?
    - if report.dispatches.present?
      = render partial: "dispatches/index", locals: { report: report }
    - elsif report.archived? && report.dispatches.empty?
      No one assigned
